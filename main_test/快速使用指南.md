# Assassyn CPU å†…å­˜åˆå§‹åŒ– - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿï¼‰

### 1. ç¡®è®¤æ–‡ä»¶å·²å‡†å¤‡å¥½
```bash
cd Assassyn-CPU/main_test
ls accumulate_*.bin
```

åº”è¯¥çœ‹åˆ°ï¼š
- `accumulate_data.bin` - æ•°æ®æ®µ
- `accumulate_text.bin` - æŒ‡ä»¤æ®µ

### 2. è¿è¡Œè½¬æ¢è„šæœ¬
```bash
python3 convert_bin_to_exe.py
```

çœ‹åˆ° âœ… è¡¨ç¤ºæˆåŠŸï¼

### 3. éªŒè¯è½¬æ¢ç»“æœ
```bash
python3 verify_conversion.py
```

çœ‹åˆ° âœ… All verifications passed! å³å¯ã€‚

### 3.5. å…¨é¢æµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
python3 test_initialization.py
```

è¿™ä¼šè¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼ŒéªŒè¯ï¼š
- âœ… ç›®å½•ç»“æ„
- âœ… æ–‡ä»¶æ ¼å¼
- âœ… æŒ‡ä»¤å†…å®¹
- âœ… CPU é…ç½®

### 4. è¿è¡Œ CPU
```bash
cd ..
python src/main.py
```

å®Œæˆï¼CPU ä¼šè‡ªåŠ¨åŠ è½½åˆå§‹åŒ–æ–‡ä»¶ã€‚

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
Assassyn-CPU/
â”œâ”€â”€ main_test/
â”‚   â”œâ”€â”€ accumulate_data.bin          # è¾“å…¥ï¼šæ•°æ®æ®µ
â”‚   â”œâ”€â”€ accumulate_text.bin          # è¾“å…¥ï¼šæŒ‡ä»¤æ®µ
â”‚   â”œâ”€â”€ convert_bin_to_exe.py        # å·¥å…·ï¼šè½¬æ¢è„šæœ¬
â”‚   â”œâ”€â”€ verify_conversion.py         # å·¥å…·ï¼šéªŒè¯è„šæœ¬
â”‚   â”œâ”€â”€ åˆå§‹åŒ–æŠ¥å‘Š.md                 # æ–‡æ¡£ï¼šè¯¦ç»†æŠ¥å‘Š
â”‚   â”œâ”€â”€ åˆå§‹åŒ–éªŒè¯æŠ¥å‘Š.md             # æ–‡æ¡£ï¼šéªŒè¯æŠ¥å‘Š
â”‚   â””â”€â”€ å¿«é€Ÿä½¿ç”¨æŒ‡å—.md               # æ–‡æ¡£ï¼šæœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ .workspace/                       # è‡ªåŠ¨ç”Ÿæˆ
â”‚   â”œâ”€â”€ workload_mem.exe             # è¾“å‡ºï¼šæ•°æ®å†…å­˜åˆå§‹åŒ–
â”‚   â”œâ”€â”€ workload_ins.exe             # è¾“å‡ºï¼šæŒ‡ä»¤å†…å­˜åˆå§‹åŒ–
â”‚   â””â”€â”€ workload.init                # è¾“å‡ºï¼šåç§»é‡åˆå§‹åŒ–
â”‚
â””â”€â”€ src/
    â””â”€â”€ main.py                      # CPU æ„å»ºè„šæœ¬ï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰
```

---

## ğŸ”„ å·¥ä½œæµç¨‹å›¾

```
accumulate_data.bin  â”€â”€â”
                       â”œâ”€â”€> convert_bin_to_exe.py â”€â”€> .workspace/workload_mem.exe â”€â”€â”
accumulate_text.bin  â”€â”€â”˜                            > .workspace/workload_ins.exe â”€â”€â”¤
                                                    > .workspace/workload.init      â”‚
                                                                                     â”‚
                                                                                     â†“
                                                                              src/main.py
                                                                                     â”‚
                                                                                     â†“
                                                                              CPU ä»¿çœŸè¿è¡Œ
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
```bash
ls -lh ../.workspace/
```

### æŸ¥çœ‹æŒ‡ä»¤å†…å®¹
```bash
cat ../.workspace/workload_ins.exe
```

### æŸ¥çœ‹æŒ‡ä»¤æ•°é‡
```bash
wc -l ../.workspace/workload_ins.exe
```

### æŸ¥çœ‹æ•°æ®å†…å®¹
```bash
cat ../.workspace/workload_mem.exe
```

---

## âš™ï¸ ä½¿ç”¨è‡ªå·±çš„ç¨‹åº

### æ–¹æ³• 1: æ›¿æ¢äºŒè¿›åˆ¶æ–‡ä»¶

```bash
# 1. å‡†å¤‡ä½ çš„ .bin æ–‡ä»¶
cp your_data.bin accumulate_data.bin
cp your_text.bin accumulate_text.bin

# 2. è¿è¡Œè½¬æ¢
python3 convert_bin_to_exe.py

# 3. è¿è¡Œ CPU
cd .. && python src/main.py
```

### æ–¹æ³• 2: ä» RISC-V å·¥å…·é“¾ç”Ÿæˆ

```bash
# ç¼–è¯‘ä½ çš„ç¨‹åº
riscv32-unknown-elf-gcc -march=rv32i -mabi=ilp32 -nostdlib -o program.elf program.c

# æå–äºŒè¿›åˆ¶æ®µ
riscv32-unknown-elf-objcopy -O binary -j .text program.elf accumulate_text.bin
riscv32-unknown-elf-objcopy -O binary -j .data program.elf accumulate_data.bin

# è½¬æ¢å¹¶è¿è¡Œ
python3 convert_bin_to_exe.py
cd .. && python src/main.py
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: è½¬æ¢è„šæœ¬æŠ¥é”™æ‰¾ä¸åˆ°æ–‡ä»¶
**A**: ç¡®ä¿åœ¨ `main_test/` ç›®å½•ä¸‹è¿è¡Œï¼Œå¹¶ä¸” `.bin` æ–‡ä»¶å­˜åœ¨ã€‚

```bash
cd main_test
ls *.bin
python3 convert_bin_to_exe.py
```

### Q2: .workspace ç›®å½•ä¸å­˜åœ¨
**A**: è½¬æ¢è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œæˆ–æ‰‹åŠ¨åˆ›å»ºï¼š

```bash
mkdir -p .workspace
```

### Q3: æ•°æ®æ–‡ä»¶æ˜¯ç©ºçš„æ­£å¸¸å—ï¼Ÿ
**A**: æ­£å¸¸ï¼accumulate ç¨‹åºä¸éœ€è¦é™æ€æ•°æ®ï¼Œåªä½¿ç”¨æ ˆã€‚

### Q4: å¦‚ä½•æŸ¥çœ‹æŒ‡ä»¤å†…å®¹ï¼Ÿ
**A**: ä½¿ç”¨ cat æˆ– hexdump æŸ¥çœ‹ï¼š

```bash
cat ../.workspace/workload_ins.exe
```

### Q5: ä¿®æ”¹äº† .bin æ–‡ä»¶åè¦åšä»€ä¹ˆï¼Ÿ
**A**: é‡æ–°è¿è¡Œè½¬æ¢è„šæœ¬ï¼š

```bash
python3 convert_bin_to_exe.py
```

---

## ğŸ§ª æµ‹è¯•ç›¸å…³

### è¿è¡Œå…¨éƒ¨æµ‹è¯•
```bash
cd ..
pytest tests/ -v
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
pytest tests/test_fetch.py -v       # æŒ‡ä»¤è·å–æµ‹è¯•
pytest tests/test_decoder.py -v     # æŒ‡ä»¤è§£ç æµ‹è¯•
pytest tests/test_memory.py -v      # å†…å­˜è®¿é—®æµ‹è¯•
```

---

## ğŸ“Š Accumulate ç¨‹åºä¿¡æ¯

### ç¨‹åºåŠŸèƒ½
è®¡ç®— 1+2+3+...+100 = **5050** (0x13BA)

### ç¨‹åºè§„æ¨¡
- **æŒ‡ä»¤æ•°**: 22æ¡
- **æ–‡ä»¶å¤§å°**: 88å­—èŠ‚
- **æ•°æ®æ®µ**: 0å­—èŠ‚ï¼ˆä½¿ç”¨æ ˆï¼‰

### æŒ‡ä»¤åˆ†å¸ƒ
- ADDI: 9æ¡ (41%)
- SW: 4æ¡ (18%)
- LW: 4æ¡ (18%)
- ADD: 1æ¡ (5%)
- JAL: 1æ¡ (5%)
- BGE: 1æ¡ (5%)
- JALR: 1æ¡ (5%)

### æµ‹è¯•è¦†ç›–
- âœ… ç®—æœ¯è¿ç®—
- âœ… å†…å­˜è¯»å†™
- âœ… å¾ªç¯æ§åˆ¶
- âœ… åˆ†æ”¯è·³è½¬
- âœ… å‡½æ•°è°ƒç”¨/è¿”å›

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†è¯´æ˜**: `åˆå§‹åŒ–æŠ¥å‘Š.md` - å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£
- **éªŒè¯æŠ¥å‘Š**: `åˆå§‹åŒ–éªŒè¯æŠ¥å‘Š.md` - è¯¦ç»†çš„éªŒè¯ç»“æœ
- **å¿«é€ŸæŒ‡å—**: `å¿«é€Ÿä½¿ç”¨æŒ‡å—.md` - æœ¬æ–‡æ¡£

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
è½¬æ¢å’ŒéªŒè¯è„šæœ¬éƒ½ä¼šè¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- æ–‡ä»¶å¤§å°
- æŒ‡ä»¤æ•°é‡
- å‰å‡ ä¸ªå€¼çš„é¢„è§ˆ
- é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰

### æ£€æŸ¥æ–‡ä»¶æ ¼å¼
ç”Ÿæˆçš„ `.exe` æ–‡ä»¶æ ¼å¼åº”è¯¥æ˜¯ï¼š
- çº¯æ–‡æœ¬æ–‡ä»¶
- æ¯è¡Œä¸€ä¸ª8ä½åå…­è¿›åˆ¶æ•°
- å°å†™å­—æ¯
- æ—  `0x` å‰ç¼€

ç¤ºä¾‹ï¼š
```
fe010113
00812e23
02010413
```

---

**æœ€åæ›´æ–°**: 2025-12-13  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: âœ… å¯ç”¨
