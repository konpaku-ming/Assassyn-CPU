# Assassyn-CPU

[![RISC-V](https://img.shields.io/badge/RISC--V-RV32IM-brightgreen.svg)](https://riscv.org/)
[![Assassyn](https://img.shields.io/badge/Assassyn-HDL-orange.svg)](https://github.com/assassyn-lang/assassyn)

ä¸€ä¸ªåŸºäº **Assassyn ç¡¬ä»¶æè¿°è¯­è¨€** å®ç°çš„ **RISC-V RV32IM** äº”çº§æµæ°´çº¿ CPU ä»¿çœŸé¡¹ç›®ã€‚

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ [Assassyn](https://github.com/assassyn-lang/assassyn) æ¡†æ¶å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ RISC-V 32 ä½æ•´æ•°æŒ‡ä»¤é›†å¤„ç†å™¨ï¼ˆRV32IMï¼‰ï¼Œæ”¯æŒæ ‡å‡†æ•´æ•°æŒ‡ä»¤ï¼ˆIï¼‰å’Œä¹˜é™¤æ³•æ‰©å±•æŒ‡ä»¤ï¼ˆMï¼‰ã€‚

### ä¸»è¦ç‰¹æ€§

- **äº”çº§æµæ°´çº¿æ¶æ„**ï¼šIF â†’ ID â†’ EX â†’ MEM â†’ WB
- **å®Œæ•´çš„ RV32IM æŒ‡ä»¤é›†æ”¯æŒ**ï¼šåŒ…æ‹¬æ‰€æœ‰æ•´æ•°æŒ‡ä»¤å’Œ M æ‰©å±•ï¼ˆä¹˜æ³•/é™¤æ³•ï¼‰
- **é«˜çº§åˆ†æ”¯é¢„æµ‹**ï¼šBTBï¼ˆåˆ†æ”¯ç›®æ ‡ç¼“å†²ï¼‰+ Tournament Predictorï¼ˆç«äº‰é¢„æµ‹å™¨ï¼‰
- **æ•°æ®å†’é™©å¤„ç†**ï¼šå®Œæ•´çš„æ—è·¯ï¼ˆForwardingï¼‰å’Œæµæ°´çº¿æš‚åœï¼ˆStallï¼‰æœºåˆ¶
- **å¤šå‘¨æœŸåŠŸèƒ½å•å…ƒ**ï¼šWallace Tree ä¹˜æ³•å™¨ï¼ˆ3 å‘¨æœŸï¼‰å’Œ Radix-16 é™¤æ³•å™¨ï¼ˆ~10 å‘¨æœŸï¼‰
- **ç»Ÿä¸€å†…å­˜æ¶æ„**ï¼šå•ç«¯å£ SRAMï¼Œæ”¯æŒå­—èŠ‚/åŠå­—/å­—è®¿é—®

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
Assassyn-CPU/
â”œâ”€â”€ src/                          # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ main.py                   # CPU é¡¶å±‚æ¨¡å—ä¸ç³»ç»Ÿæ„å»º
â”‚   â”œâ”€â”€ control_signals.py        # æ§åˆ¶ä¿¡å·å®šä¹‰ä¸ Record ç»“æ„
â”‚   â”œâ”€â”€ instruction_table.py      # RV32IM æŒ‡ä»¤çœŸå€¼è¡¨
â”‚   â”œâ”€â”€ fetch.py                  # IFï¼ˆå–æŒ‡ï¼‰é˜¶æ®µæ¨¡å—
â”‚   â”œâ”€â”€ decoder.py                # IDï¼ˆè¯‘ç ï¼‰é˜¶æ®µæ¨¡å—
â”‚   â”œâ”€â”€ execution.py              # EXï¼ˆæ‰§è¡Œï¼‰é˜¶æ®µæ¨¡å—
â”‚   â”œâ”€â”€ memory.py                 # MEMï¼ˆè®¿å­˜ï¼‰é˜¶æ®µæ¨¡å—
â”‚   â”œâ”€â”€ writeback.py              # WBï¼ˆå†™å›ï¼‰é˜¶æ®µæ¨¡å—
â”‚   â”œâ”€â”€ hazard_unit.py            # å†’é™©æ£€æµ‹å•å…ƒå…¥å£
â”‚   â”œâ”€â”€ data_hazard.py            # æ•°æ®å†’é™©æ£€æµ‹ä¸æ—è·¯é€»è¾‘
â”‚   â”œâ”€â”€ btb.py                    # åˆ†æ”¯ç›®æ ‡ç¼“å†²ï¼ˆBTBï¼‰
â”‚   â”œâ”€â”€ tournament_predictor.py   # Tournament åˆ†æ”¯é¢„æµ‹å™¨
â”‚   â”œâ”€â”€ multiplier.py             # Wallace Tree ä¹˜æ³•å™¨
â”‚   â”œâ”€â”€ divider.py                # Radix-16 é™¤æ³•å™¨
â”‚   â””â”€â”€ debug_utils.py            # è°ƒè¯•æ—¥å¿—å·¥å…·
â”‚
â”œâ”€â”€ docs/                         # è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ Assassyn.md               # Assassyn è¯­è¨€å­¦ä¹ ç¬”è®°
â”‚   â”œâ”€â”€ Assassyn_è¯­è¨€å®Œæ•´è¯´æ˜ä¹¦.md  # Assassyn å®Œæ•´è¯­æ³•å‚è€ƒ
â”‚   â”œâ”€â”€ Agent.md                  # AI Agent å¼€å‘æŒ‡å¯¼
â”‚   â””â”€â”€ Module/                   # å„æ¨¡å—è®¾è®¡æ–‡æ¡£
â”‚       â”œâ”€â”€ IF.md                 # å–æŒ‡é˜¶æ®µè®¾è®¡
â”‚       â”œâ”€â”€ ID.md                 # è¯‘ç é˜¶æ®µè®¾è®¡
â”‚       â”œâ”€â”€ EX.md                 # æ‰§è¡Œé˜¶æ®µè®¾è®¡
â”‚       â”œâ”€â”€ MEM.md                # è®¿å­˜é˜¶æ®µè®¾è®¡
â”‚       â”œâ”€â”€ WB.md                 # å†™å›é˜¶æ®µè®¾è®¡
â”‚       â”œâ”€â”€ DataHazard.md         # æ•°æ®å†’é™©å¤„ç†è®¾è®¡
â”‚       â”œâ”€â”€ ControlHazard.md      # æ§åˆ¶å†’é™©å¤„ç†è®¾è®¡
â”‚       â””â”€â”€ BranchPrediction.md   # åˆ†æ”¯é¢„æµ‹è¯¦ç»†åŸç†
â”‚
â”œâ”€â”€ tests/                        # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ common.py                 # é€šç”¨æµ‹è¯•æ¡†æ¶
â”‚   â”œâ”€â”€ test_fetch.py             # å–æŒ‡æ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_decoder.py           # è¯‘ç æ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_execute_*.py         # æ‰§è¡Œæ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_memory.py            # è®¿å­˜æ¨¡å—æµ‹è¯•
â”‚   â””â”€â”€ test_writeback.py         # å†™å›æ¨¡å—æµ‹è¯•
â”‚
â”œâ”€â”€ testcases/                    # æµ‹è¯•ç”¨ä¾‹æºç 
â”‚   â”œâ”€â”€ *.c                       # C è¯­è¨€æµ‹è¯•ç¨‹åº (gcd, qsort, hanoi ç­‰)
â”‚   â”œâ”€â”€ *.data                    # æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ *.dump                    # åæ±‡ç¼–æ–‡ä»¶
â”‚
â”œâ”€â”€ workloads/                    # ç¼–è¯‘åçš„æµ‹è¯•ç¨‹åº (*.exe)
â”œâ”€â”€ logs/                         # è¿è¡Œæ—¥å¿—
â”œâ”€â”€ report/                       # æ€§èƒ½æŠ¥å‘Š
â””â”€â”€ verilog_hex_converter.py      # Verilog Hex æ ¼å¼è½¬æ¢å·¥å…·
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æµæ°´çº¿æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        äº”çº§æµæ°´çº¿å¤„ç†å™¨æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  IF  â”‚â”€â”€â”€â–ºâ”‚  ID  â”‚â”€â”€â”€â–ºâ”‚  EX  â”‚â”€â”€â”€â–ºâ”‚ MEM  â”‚â”€â”€â”€â–ºâ”‚  WB  â”‚           â”‚
â”‚   â”‚ å–æŒ‡  â”‚    â”‚ è¯‘ç   â”‚    â”‚ æ‰§è¡Œ  â”‚    â”‚ è®¿å­˜  â”‚    â”‚ å†™å›  â”‚           â”‚
â”‚   â””â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚      â”‚           â”‚           â”‚                                        â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚      â”‚  â”‚      Hazard Unit            â”‚  â—„â”€â”€â”€ æ—è·¯ & Stall æ§åˆ¶      â”‚
â”‚      â”‚  â”‚   (æ•°æ®å†’é™©æ£€æµ‹å•å…ƒ)          â”‚                              â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚      â”‚                                                                â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚      â””â”€â”€â”¤   Branch Prediction Unit    â”‚  â—„â”€â”€â”€ BTB + Tournament       â”‚
â”‚         â”‚   (åˆ†æ”¯é¢„æµ‹å•å…ƒ)              â”‚                              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„é˜¶æ®µåŠŸèƒ½

| é˜¶æ®µ | æ¨¡å—æ–‡ä»¶ | ä¸»è¦åŠŸèƒ½ |
|------|---------|---------|
| **IF** | `fetch.py` | PC ç®¡ç†ã€æŒ‡ä»¤ç¼“å­˜è¯»å–ã€åˆ†æ”¯é¢„æµ‹æŸ¥è¯¢ |
| **ID** | `decoder.py` | æŒ‡ä»¤è¯‘ç ã€ç«‹å³æ•°ç”Ÿæˆã€å¯„å­˜å™¨è¯»å–ã€æ§åˆ¶ä¿¡å·ç”Ÿæˆ |
| **EX** | `execution.py` | ALU è¿ç®—ã€åˆ†æ”¯åˆ¤æ–­ã€åœ°å€è®¡ç®—ã€æ—è·¯æ•°æ®é€‰æ‹© |
| **MEM** | `memory.py` | æ•°æ®ç¼“å­˜è¯»å†™ã€æ•°æ®å¯¹é½ã€Load/Store å¤„ç† |
| **WB** | `writeback.py` | å¯„å­˜å™¨å†™å›ã€åœæœºæ£€æµ‹ |

### æ”¯æŒçš„æŒ‡ä»¤é›†

#### åŸºç¡€æ•´æ•°æŒ‡ä»¤ (RV32I)

| ç±»å‹ | æŒ‡ä»¤ |
|------|-----|
| **ç®—æœ¯è¿ç®—** | ADD, SUB, ADDI |
| **é€»è¾‘è¿ç®—** | AND, OR, XOR, ANDI, ORI, XORI |
| **ç§»ä½è¿ç®—** | SLL, SRL, SRA, SLLI, SRLI, SRAI |
| **æ¯”è¾ƒè¿ç®—** | SLT, SLTU, SLTI, SLTIU |
| **åŠ è½½æŒ‡ä»¤** | LB, LH, LW, LBU, LHU |
| **å­˜å‚¨æŒ‡ä»¤** | SB, SH, SW |
| **åˆ†æ”¯æŒ‡ä»¤** | BEQ, BNE, BLT, BGE, BLTU, BGEU |
| **è·³è½¬æŒ‡ä»¤** | JAL, JALR |
| **ç«‹å³æ•°æŒ‡ä»¤** | LUI, AUIPC |
| **ç³»ç»ŸæŒ‡ä»¤** | ECALL, EBREAK |

#### ä¹˜é™¤æ³•æ‰©å±• (RV32M)

| æŒ‡ä»¤ | åŠŸèƒ½ | å®ç°æ–¹å¼ |
|------|-----|---------|
| MUL | ä¹˜æ³•ï¼ˆä½32ä½ï¼‰ | 3 å‘¨æœŸ Wallace Tree |
| MULH | æœ‰ç¬¦å·ä¹˜æ³•ï¼ˆé«˜32ä½ï¼‰ | 3 å‘¨æœŸ Wallace Tree |
| MULHSU | æœ‰ç¬¦å·Ã—æ— ç¬¦å·ï¼ˆé«˜32ä½ï¼‰ | 3 å‘¨æœŸ Wallace Tree |
| MULHU | æ— ç¬¦å·ä¹˜æ³•ï¼ˆé«˜32ä½ï¼‰ | 3 å‘¨æœŸ Wallace Tree |
| DIV | æœ‰ç¬¦å·é™¤æ³• | ~10 å‘¨æœŸ Radix-16 |
| DIVU | æ— ç¬¦å·é™¤æ³• | ~10 å‘¨æœŸ Radix-16 |
| REM | æœ‰ç¬¦å·å–ä½™ | ~10 å‘¨æœŸ Radix-16 |
| REMU | æ— ç¬¦å·å–ä½™ | ~10 å‘¨æœŸ Radix-16 |

### åˆ†æ”¯é¢„æµ‹ç³»ç»Ÿ

æœ¬é¡¹ç›®å®ç°äº†å…ˆè¿›çš„åˆ†æ”¯é¢„æµ‹ç³»ç»Ÿï¼ŒåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š

#### BTBï¼ˆBranch Target Bufferï¼‰

- 64 æ¡ç›®ç›´æ¥æ˜ å°„ç¼“å­˜
- å­˜å‚¨åˆ†æ”¯ç›®æ ‡åœ°å€
- ä»…åœ¨åˆ†æ”¯è·³è½¬æ—¶æ›´æ–°

#### Tournament Predictor

- **Bimodal é¢„æµ‹å™¨**ï¼šåŸºäº 2-bit é¥±å’Œè®¡æ•°å™¨çš„å±€éƒ¨é¢„æµ‹
- **Gshare é¢„æµ‹å™¨**ï¼šåŸºäºå…¨å±€å†å²å¯„å­˜å™¨çš„ç›¸å…³æ€§é¢„æµ‹
- **é€‰æ‹©å™¨**ï¼šåŠ¨æ€é€‰æ‹©æ›´å‡†ç¡®çš„é¢„æµ‹å™¨

```
é¢„æµ‹é€»è¾‘æµç¨‹:
1. BTB æŸ¥è¯¢ â†’ æ˜¯å¦æœ‰ç¼“å­˜çš„ç›®æ ‡åœ°å€ï¼Ÿ
2. Tournament Predictor é¢„æµ‹ â†’ åˆ†æ”¯æ˜¯å¦è·³è½¬ï¼Ÿ
3. å¦‚æœ BTB å‘½ä¸­ ä¸” é¢„æµ‹è·³è½¬ â†’ ä½¿ç”¨ BTB ç›®æ ‡åœ°å€
4. å¦åˆ™ â†’ ä½¿ç”¨ PC+4
```

### æ•°æ®å†’é™©å¤„ç†

#### æ—è·¯ï¼ˆForwardingï¼‰è·¯å¾„

```
EX é˜¶æ®µç»“æœ  â”€â”€â”¬â”€â”€â–º EX é˜¶æ®µ ALU è¾“å…¥ (EX-EX æ—è·¯)
              â”‚
MEM é˜¶æ®µç»“æœ â”€â”€â”¼â”€â”€â–º EX é˜¶æ®µ ALU è¾“å…¥ (MEM-EX æ—è·¯)
              â”‚
WB é˜¶æ®µç»“æœ  â”€â”€â”˜â”€â”€â–º EX é˜¶æ®µ ALU è¾“å…¥ (WB-EX æ—è·¯)
```

#### æµæ°´çº¿æš‚åœæƒ…å†µ

| å†’é™©ç±»å‹ | æ£€æµ‹æ¡ä»¶ | å¤„ç†æ–¹å¼ |
|---------|---------|---------|
| Load-Use | EX çº§æ˜¯ Load ä¸” rd åŒ¹é… | æš‚åœ 1 å‘¨æœŸ |
| MUL å ç”¨ | ä¹˜æ³•å™¨æ­£åœ¨å·¥ä½œ | æš‚åœç›´åˆ°å®Œæˆ |
| DIV å ç”¨ | é™¤æ³•å™¨æ­£åœ¨å·¥ä½œ | æš‚åœç›´åˆ°å®Œæˆ |
| Store-Load | EX/MEM çº§æœ‰ Store/Load | æš‚åœ 1 å‘¨æœŸ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python 3.8+**
- **Assassyn æ¡†æ¶**ï¼ˆéœ€è¦ Rust ç¼–è¯‘å™¨ï¼‰
- **å¯é€‰**ï¼šVerilatorï¼ˆç”¨äº Verilog ä»¿çœŸï¼‰

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/konpaku-ming/Assassyn-CPU.git
cd Assassyn-CPU

# å®‰è£… Assassyn æ¡†æ¶ï¼ˆå‚è€ƒ Assassyn å®˜æ–¹æ–‡æ¡£ï¼‰
# https://github.com/assassyn-lang/assassyn
```

### è¿è¡Œä»¿çœŸ

```bash
# è¿è¡Œé»˜è®¤æµ‹è¯•ç¨‹åº
cd src
python -m main

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
python -c "
from main import load_test_case, build_cpu
from assassyn import utils
from assassyn.backend import elaborate, config

# åŠ è½½æµ‹è¯•ç”¨ä¾‹
load_test_case('gcd')  # æˆ–å…¶ä»– workloads ä¸­çš„æµ‹è¯•

# æ„å»º CPU
sys = build_cpu(depth_log=16, enable_branch_prediction=True)

# ç¼–è¯‘å¹¶è¿è¡Œ
cfg = config(verilog=False, sim_threshold=1000000)
simulator_path, _ = elaborate(sys, **cfg)
binary_path = utils.build_simulator(simulator_path)
output = utils.run_simulator(binary_path=binary_path)
print(output)
"
```

### è¿è¡Œå•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
python -m pytest tests/test_decoder.py
python -m pytest tests/test_execute_part1.py
```

---

## ğŸ“– æ–‡æ¡£

è¯¦ç»†çš„è®¾è®¡æ–‡æ¡£ä½äº `docs/` ç›®å½•ï¼š

| æ–‡æ¡£ | æè¿° |
|-----|------|
| [Assassyn.md](docs/Assassyn.md) | Assassyn è¯­è¨€æ ¸å¿ƒæ¦‚å¿µç¬”è®° |
| [Assassyn_è¯­è¨€å®Œæ•´è¯´æ˜ä¹¦.md](docs/Assassyn_è¯­è¨€å®Œæ•´è¯´æ˜ä¹¦.md) | å®Œæ•´çš„è¯­æ³•å‚è€ƒæ‰‹å†Œ |
| [Module/IF.md](docs/Module/IF.md) | å–æŒ‡é˜¶æ®µè®¾è®¡æ–‡æ¡£ |
| [Module/ID.md](docs/Module/ID.md) | è¯‘ç é˜¶æ®µè®¾è®¡æ–‡æ¡£ |
| [Module/EX.md](docs/Module/EX.md) | æ‰§è¡Œé˜¶æ®µè®¾è®¡æ–‡æ¡£ |
| [Module/DataHazard.md](docs/Module/DataHazard.md) | æ•°æ®å†’é™©å¤„ç†è®¾è®¡ |
| [Module/BranchPrediction.md](docs/Module/BranchPrediction.md) | åˆ†æ”¯é¢„æµ‹è¯¦ç»†åŸç† |

---

## ğŸ”§ å…³é”®æŠ€æœ¯

### Assassyn æ¡†æ¶

[Assassyn](https://github.com/assassyn-lang/assassyn) æ˜¯ä¸€ç§åŸºäº Python çš„ç¡¬ä»¶æè¿°è¯­è¨€ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨çš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š

```python
# æ•°æ®ç±»å‹
Bits(32)              # 32 ä½æ— ç¬¦å·ä½å‘é‡
Int(32), UInt(32)     # æœ‰ç¬¦å·/æ— ç¬¦å·æ•´æ•°
Record(...)           # ç¡¬ä»¶ç»“æ„ä½“

# æ¶æ„å•å…ƒ
Module                # æ—¶åºé€»è¾‘æ¨¡å—ï¼ˆæœ‰ç«¯å£å’ŒçŠ¶æ€ï¼‰
Downstream            # çº¯ç»„åˆé€»è¾‘æ¨¡å—

# å­˜å‚¨å•å…ƒ
RegArray(type, depth) # å¯„å­˜å™¨/å¯„å­˜å™¨å †
SRAM(width, depth)    # å¤§å®¹é‡å­˜å‚¨å™¨

# æ§åˆ¶æµ
Condition(cond)       # ç¡¬ä»¶æ¡ä»¶æ§åˆ¶
select()              # äºŒè·¯é€‰æ‹©å™¨
select1hot()          # ç‹¬çƒ­ç é€‰æ‹©å™¨
```

### æ¨¡å—é—´é€šä¿¡

```python
# å¼‚æ­¥è°ƒç”¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆ FIFOï¼‰
call = executor.async_called(ctrl=signals, data=value)
call.bind.set_fifo_depth(ctrl=1, data=1)

# ç«¯å£æ•°æ®æ¶ˆè´¹
ctrl, data = self.pop_all_ports(False)  # éé˜»å¡è¯»å–
```

---

## ğŸ“Š æµ‹è¯•ç”¨ä¾‹

`testcases/` ç›®å½•åŒ…å«å¤šç§æµ‹è¯•ç¨‹åºï¼š

| æµ‹è¯•ç”¨ä¾‹ | æè¿° |
|---------|------|
| `gcd.c` | æœ€å¤§å…¬çº¦æ•°ç®—æ³• |
| `qsort.c` | å¿«é€Ÿæ’åºç®—æ³• |
| `hanoi.c` | æ±‰è¯ºå¡”é—®é¢˜ |
| `pi.c` | åœ†å‘¨ç‡è®¡ç®— |
| `queens.c` | N çš‡åé—®é¢˜ |
| `bulgarian.c` | ä¿åŠ åˆ©äºšçº¸ç‰Œæ¸¸æˆ |
| `magic.c` | é­”æ–¹é˜µç”Ÿæˆ |
| `tak.c` | Tak å‡½æ•°é€’å½’æµ‹è¯• |
| `expr.c` | è¡¨è¾¾å¼æ±‚å€¼ |
| `array_test*.c` | æ•°ç»„æ“ä½œæµ‹è¯• |
| `multiarray.c` | å¤šç»´æ•°ç»„æµ‹è¯• |
| `superloop.c` | å¾ªç¯æ€§èƒ½æµ‹è¯• |
| `vector_mul.c` | å‘é‡ä¹˜æ³•ï¼ˆæµ‹è¯• M æ‰©å±•ï¼‰ |
| `vector_div.c` | å‘é‡é™¤æ³•ï¼ˆæµ‹è¯• M æ‰©å±•ï¼‰ |

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

---

## ğŸ™ è‡´è°¢

- [Assassyn](https://github.com/assassyn-lang/assassyn) - ç¡¬ä»¶æè¿°è¯­è¨€æ¡†æ¶
- [RISC-V](https://riscv.org/) - å¼€æºæŒ‡ä»¤é›†æ¶æ„
- [riscv-tests](https://github.com/riscv/riscv-tests) - RISC-V æµ‹è¯•ç”¨ä¾‹å‚è€ƒ

---

## ğŸ“¬ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [Issue](https://github.com/konpaku-ming/Assassyn-CPU/issues)
- å‘èµ· [Discussion](https://github.com/konpaku-ming/Assassyn-CPU/discussions)
